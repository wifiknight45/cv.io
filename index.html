<!DOCTYPE html>
<html lang="en" data-theme="auto">
<head>
  <meta charset="UTF-8" />
  <title>Robert Hodgkiss — Cybersecurity | Support | Programming</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="description" content="Aspiring cybersecurity professional transitioning from customer support. Python, JavaScript, Node.js, .NET. Seeking entry-level SOC analyst, security support, or GRC/identity operations roles." />
  <link rel="canonical" href="https://wifiknight45.github.io/vc.github.io/" />

  <!-- Open Graph -->
  <meta property="og:title" content="Robert Hodgkiss — Cybersecurity | Support | Programming" />
  <meta property="og:description" content="Aspiring cybersecurity professional with strong troubleshooting and risk screening background. Python, JavaScript, Node.js, .NET." />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://wifiknight45.github.io/vc.github.io/" />

  <style>
    /* Minimalist, professional AF */
    :root {
      --bg: #ffffff;
      --fg: #111111;
      --muted: #666666;
      --border: #e6e6e6;
      --card: #f7f7f7;
      --link: #111111; /* links rely on underline for affordance */
      --focus: #000000;

      /* Repo tree */
      --code-bg: #f6f8fa;
      --dir: #6a5acd;
      --file: #008080;
    }
    @media (prefers-color-scheme: dark) {
      :root {
        --bg: #0b0b0b;
        --fg: #e8e8e8;
        --muted: #a0a0a0;
        --border: #2a2a2a;
        --card: #121212;
        --link: #e8e8e8;
        --focus: #ffffff;

        --code-bg: #0e1116;
        --dir: #a08bff;
        --file: #22c1b5;
      }
    }
    /* Explicit theme override via [data-theme] */
    html[data-theme="light"] {
      --bg: #ffffff; --fg: #111111; --muted: #666666; --border: #e6e6e6; --card: #f7f7f7; --link: #111111; --focus:#000;
      --code-bg: #f6f8fa; --dir:#6a5acd; --file:#008080;
    }
    html[data-theme="dark"] {
      --bg: #0b0b0b; --fg: #e8e8e8; --muted: #a0a0a0; --border: #2a2a2a; --card: #121212; --link: #e8e8e8; --focus:#fff;
      --code-bg: #0e1116; --dir:#a08bff; --file:#22c1b5;
    }

    html, body {
      margin: 0;
      padding: 0;
      background: var(--bg);
      color: var(--fg);
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Inter, "Helvetica Neue", Arial, "Noto Sans", sans-serif;
      font-size: 16px;
      line-height: 1.6;
      text-rendering: optimizeLegibility;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }

    .container {
      max-width: 860px;
      margin: 0 auto;
      padding: 40px 20px 64px;
    }

    header { margin-bottom: 18px; }
    h1 {
      font-size: clamp(28px, 3.2vw, 36px);
      font-weight: 600;
      letter-spacing: -0.01em;
      margin: 0 0 4px;
    }
    .contact, .actions {
      display: flex;
      flex-wrap: wrap;
      gap: 10px 16px;
      align-items: center;
      margin: 10px 0 10px;
      color: var(--muted);
      font-size: 0.97rem;
    }
    a {
      color: var(--link);
      text-decoration: underline;
      text-decoration-thickness: 1px;
      text-underline-offset: 2px;
    }
    a:focus-visible, button:focus-visible {
      outline: 2px solid var(--focus);
      outline-offset: 2px;
      border-radius: 4px;
    }

    .btn {
      appearance: none;
      background: transparent;
      color: var(--fg);
      border: 1px solid var(--border);
      padding: 8px 12px;
      border-radius: 8px;
      cursor: pointer;
      font-weight: 600;
      letter-spacing: 0.01em;
    }
    .btn:hover { background: var(--card); }
    .btn.primary {
      background: var(--fg);
      color: var(--bg);
      border-color: var(--fg);
    }
    .btn.primary:hover { filter: brightness(0.92); }

    section {
      padding: 18px 16px;
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: 12px;
      margin: 14px 0;
    }

    h2 {
      margin: 0 0 8px;
      font-size: 1.12rem;
      font-weight: 700;
      letter-spacing: 0.005em;
    }
    h3 {
      margin: 0 0 4px;
      font-size: 1rem;
      font-weight: 600;
    }
    .meta {
      font-size: 0.92rem;
      color: var(--muted);
      margin-bottom: 6px;
    }
    .item { margin: 10px 0 14px; }
    ul { margin: 8px 0 0 18px; padding: 0; }
    li { margin: 6px 0; }

    footer {
      margin-top: 26px;
      color: var(--muted);
      font-size: 0.9rem;
      display: flex;
      gap: 16px;
      flex-wrap: wrap;
      align-items: center;
    }

    /* Repo structure section */
    .repo-toolbar {
      display: flex;
      gap: 10px;
      align-items: center;
      margin: 10px 0 8px;
      flex-wrap: wrap;
    }
    .repo-status {
      color: var(--muted);
      font-size: 0.92rem;
    }
    .tree-wrap {
      background: var(--code-bg);
      border: 1px solid var(--border);
      border-radius: 10px;
      padding: 12px 14px;
      overflow: auto;
      max-height: 480px;
    }
    .file-tree {
      font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace;
      font-size: 0.95rem;
      line-height: 1.5;
      margin: 0;
      padding-left: 0;
      list-style: none;
    }
    .file-tree li {
      position: relative;
      margin: 2px 0 2px 0;
      padding-left: 22px;
      white-space: nowrap;
    }
    .file-tree li::before {
      content: " ";
      position: absolute;
      left: 9px;
      top: 0.95em;
      width: 8px;
      height: 1px;
      background: var(--border);
    }
    .file-tree a {
      text-decoration: none;
      color: var(--link);
    }
    .node-dir > .label { color: var(--dir); font-weight: 600; }
    .node-file > .label { color: var(--file); }
    .twisty {
      cursor: pointer;
      user-select: none;
      margin-right: 6px;
      font-weight: 600;
    }
    .hidden { display: none !important; }

    /* Mermaid container */
    .mermaid-wrap {
      background: var(--code-bg);
      border: 1px solid var(--border);
      border-radius: 10px;
      padding: 8px 10px;
      overflow: auto;
      max-height: 520px;
    }

    /* Print */
    @media print {
      .actions { display: none !important; }
      section { background: #fff; border-color: #ddd; }
      a[href^="http"]::after { content: " (" attr(href) ")"; font-size: 0.9em; color: #444; }
      body { color: #000; }
    }
  </style>

  <!-- Structured data -->
  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"Person",
    "name":"Robert Hodgkiss",
    "email":"mailto:wifiknight45@proton.me",
    "telephone":"+1-210-960-2749",
    "sameAs":["https://linkedin.com/in/robert-hodgkiss","https://github.com/wifiknight45"],
    "jobTitle":"Aspiring Cybersecurity Professional",
    "url":"https://wifiknight45.github.io/vc.github.io/"
  }
  </script>
</head>
<body>
  <div class="container">
    <header>
      <h1>Robert Hodgkiss</h1>
      <div class="contact" aria-label="Contact information">
        <span>(210) 960-2749</span>
        <a href="mailto:wifiknight45@proton.me">Email: wifiknight45@proton.me</a>
        <a href="https://wifiknight45.github.io/cv.io/" target="_blank" rel="noopener">Resume: wifiknight45.github.io/cv.io/</a>
        <a href="https://linkedin.com/in/robert-hodgkiss" target="_blank" rel="noopener">LinkedIn: linkedin.com/in/robert-hodgkiss</a>
        <a href="https://github.com/wifiknight45" target="_blank" rel="noopener">GitHub: github.com/wifiknight45</a>
      </div>

      <div class="actions" role="toolbar" aria-label="Actions">
        <button class="btn" onclick="window.print()">Print</button>
        <button id="themeToggle" class="btn" aria-pressed="false" aria-label="Toggle theme">Toggle dark mode</button>
      </div>
    </header>

    <section aria-labelledby="summary-heading">
      <h2 id="summary-heading">Professional summary</h2>
      <p>
        Aspiring Cybersecurity professional transitioning from customer support, focused on protecting people and their data. Developing programming skills in Python, JavaScript, Node.js, and .NET. Enjoys finding novel solutions to problems via software/programming. Strengths include hands‑on troubleshooting, technical triage, risk screening, and clear, compliant documentation. Experienced in coaching users on secure authentication and fraud‑prevention best practices. Calm under pressure and ready to contribute in an entry‑level SOC Analyst, Security Support, or GRC/Identity Operations role.
      </p>
    </section>

    <!-- NEW: Auto-updating repo structure (HTML tree + Mermaid diagram) -->
    <section aria-labelledby="repo-structure-heading"
      <h2 id="repo-structure-heading">Repository structure (auto‑updated)</h2>

      <div class="repo-toolbar" role="toolbar" aria-label="Repository view controls">
        <button id="viewTreeBtn" class="btn" aria-pressed="true">Tree view</button>
        <button id="viewMermaidBtn" class="btn" aria-pressed="false">Mermaid diagram</button>
        <span id="repoStatus" class="repo-status" aria-live="polite">Loading latest structure…</span>
      </div>

      <div id="treeWrap" class="tree-wrap">
        <ul id="fileTree" class="file-tree" aria-label="Repository file tree"></ul>
      </div>

      <div id="mermaidWrap" class="mermaid-wrap hidden" aria-hidden="true">
        <pre id="mermaidBox" class="mermaid">graph TD
subgraph Loading
A[Fetching repository…]
end</pre>
      </div>
    </section>

    <section aria-labelledby="education-heading">
      <h2 id="education-heading">Education</h2>
      <div class="item">
        <h3>University of California, Santa Cruz — Independent Study in Linguistics and Foreign Languages</h3>
        <div class="meta">2003 – 2005</div>
      </div>
    </section>

    <section aria-labelledby="skills-heading">
      <h2 id="skills-heading">Technical skills</h2>
      <ul>
        <li><strong>Programming:</strong> Python, JavaScript, CSS, HTML, Node.js, .NET</li>
        <li><strong>Security:</strong> Secure authentication/MFA coaching, fraud‑prevention education, risk screening, data privacy</li>
        <li><strong>Tools:</strong> Atlassian, Confluence, CRM platforms, Git, GitHub, JIRA, SharePoint, ticketing workflows</li>
        <li><strong>Networking:</strong> Device connectivity troubleshooting, network performance testing and root-cause analysis</li>
        <li><strong>Languages:</strong> English, French, Spanish</li>
      </ul>
    </section>

    <section aria-labelledby="certs-heading">
      <h2 id="certs-heading">Certifications</h2>
      <ul>
        <li>Learning Threat Intelligence, LinkedIn Learning, Nov 2024</li>
        <li>Penetration Testing Essential, LinkedIn Learning, Nov 2024
        <li>Certificate of Spanish Language Proficiency, State of California, Jul 2017</li>
        </li>
      </ul>
    </section>

<section aria-labelledby="projects-heading">
  <h2 id="projects-heading">Projects</h2>
  <ul>
    <!-- Decorative empty bullet under "Projects" -->
    <li aria-hidden="true">&nbsp;</li>

    <li>
      <strong>Automation:</strong> Developed zBc_3.0v1 (Billing Cycle Script), T‑Mobile, May 2025
      <a
        href="https://github.com/wifiknight45/zBc"
        target="_blank"
        style="color: #0366d6; text-decoration: none; font-weight: bold;"
        >repository</a
      >
      <ul>
        <li>
          <strong>Purpose:</strong> To calculate critical billing milestones with a configurable password‑based key derivation using PBKDF2‑HMAC‑SHA256 for secure data handling.
        </li>
        <li>
          <strong>Impact:</strong> Reduced manual effort, increased accuracy, and accelerated customer issue resolution.
        </li>
        <li>
          <strong>Currently in development:</strong> a website and app for a minimum viable product. Recently finished the Python core logic, pivoting to focus on the frontend website, then containerization before an app store launch.
        </li>
      </ul>
    </li>

    <li>
      <strong>RSI_314:</strong> a Python script for an LSTM model that uses RSI (Relative Strength Index) with financial data integrated from PostgreSQL to determine the potential profitability of future stock trades.
      <a
        href="https://github.com/wifiknight45/RSI_314"
        target="_blank"
        style="color: #0366d6; text-decoration: none; font-weight: bold;"
        >repository</a
      >
    </li>
  </ul>
</section>


    <section aria-labelledby="experience-heading">
      <h2 id="experience-heading">Professional experience</h2>

      <div class="item">
        <h3>T‑Mobile - Account Associate</h3>
        <div class="meta">Springfield, MO • May 2025 – Aug 2025</div>
        <ul>
          <li><strong>Customer care:</strong> Resolved account issues, service concerns, and technical inquiries with precision and empathy.</li>
          <li><strong>Troubleshooting:</strong> Diagnosed device connectivity, network performance, and account security concerns for swift resolution.</li>
          <li><strong>Systems/CRM:</strong> Managed accounts, billing adjustments, and feature configuration with strong data integrity and privacy.</li>
          <li><strong>Security education:</strong> Coached customers on account protection, secure authentication, and fraud‑prevention best practices.</li>
          <li><strong>Automation:</strong> Built a Python script to calculate billing milestones for post‑paid customers.</li>
        </ul>
      </div>

      <div class="item">
        <h3>Wells Fargo - Senior Customer Service Representative</h3>
        <div class="meta">San Antonio, TX • Jan 2025 – Mar 2025</div>
        <ul>
          <li><strong>Risk controls:</strong> Submitted business account applications and ran risk screens to mitigate potential loss.</li>
          <li><strong>Data review:</strong> Verified application data and business filings for comprehensive evaluation.</li>
          <li><strong>Stakeholder updates:</strong> Performed status checks and communicated decisions professionally.</li>
          <li><strong>Throughput:</strong> Multitasked across SharePoint and Excel to maintain accuracy under tight deadlines.</li>
        </ul>
      </div>

      <div class="item">
        <h3>TaskUs, Inc. - Customer Service Specialist</h3>
        <div class="meta">New Braunfels, TX • Sep 2024 – Nov 2024</div>
        <ul>
          <li><strong>Resolution:</strong> Delivered swift resolutions to urgent customer concerns while meeting quality and efficiency standards.</li>
          <li><strong>Documentation:</strong> Maintained detailed records across platforms to ensure policy adherence.</li>
          <li><strong>Performance:</strong> Consistently exceeded performance goals across diverse customer needs.</li>
        </ul>
      </div>

      <div class="item">
        <h3>Health and well‑being career break</h3>
        <div class="meta">Apr 2024 – Aug 2024</div>
        <ul>
          <li><strong>Context:</strong> Short medical hiatus for surgery and recovery.</li>
        </ul>
      </div>
    </section>

    <section aria-labelledby="additional-heading">
      <h2 id="additional-heading">Additional experience</h2>

      <div class="item">
        <h3>Wal‑Mart, Inc. - Associate</h3>
        <div class="meta">Springfield, MO • Jan 2024 – Apr 2024</div>
        <ul>
          <li><strong>Operations:</strong> Resolved stock inquiries; maintained efficiency in a fast‑paced environment.</li>
        </ul>
      </div>

      <div class="item">
        <h3>Charter Communications (Spectrum) - Sales Support Activation Specialist I</h3>
        <div class="meta">San Antonio, TX • Aug 2021 – Sep 2021</div>
        <ul>
          <li><strong>Service/ticketing:</strong> Resolved internet issues in English/Spanish; managed activation tickets offline.</li>
        </ul>
      </div>

      <div class="item">
        <h3>Telelanguage - Customer Service Specialist</h3>
        <div class="meta">Remote • Aug 2020 – Jun 2021</div>
        <ul>
          <li><strong>Coordination:</strong> Scheduled interpreters; maintained healthcare records to quality standards.</li>
        </ul>
      </div>

      <div class="item">
        <h3>State of California, Health Benefit Exchange - Program Technician II</h3>
        <div class="meta">Fresno, CA • Oct 2016 – Feb 2019</div>
        <ul>
          <li><strong>Compliance/docs:</strong> Processed applications, verified eligibility, resolved complaints, and authored knowledge‑base articles.</li>
        </ul>
      </div>
    </section>

    <footer>
      <span>© Robert Hodgkiss</span>
    </footer>
  </div>

  <script>
    // Theme toggle with persistence
    (function() {
      const root = document.documentElement;
      const btn = document.getElementById('themeToggle');
      const saved = localStorage.getItem('theme'); // 'light' | 'dark' | null

      function apply(theme) {
        if (theme === 'light' || theme === 'dark') {
          root.setAttribute('data-theme', theme);
          btn.setAttribute('aria-pressed', theme === 'dark');
          btn.textContent = theme === 'dark' ? 'Switch to light mode' : 'Switch to dark mode';
        } else {
          root.setAttribute('data-theme', 'auto');
          const prefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
          btn.setAttribute('aria-pressed', prefersDark);
          btn.textContent = prefersDark ? 'Switch to light mode' : 'Switch to dark mode';
        }
      }

      apply(saved);

      btn.addEventListener('click', () => {
        const current = root.getAttribute('data-theme');
        const next = current === 'dark' ? 'light' : 'dark';
        localStorage.setItem('theme', next);
        apply(next);
        // Optional: you could re-render Mermaid with a dark theme here.
      });

      // Update label if system theme changes while in 'auto'
      if (!saved && window.matchMedia) {
        const mq = window.matchMedia('(prefers-color-scheme: dark)');
        mq.addEventListener('change', () => apply(null));
      }
    })();
  </script>

  <!-- Mermaid + GitHub API powered repo tree -->
  <script type="module">
    import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';

    // Configure Mermaid; pick theme based on current mode
    const prefersDark = matchMedia && matchMedia('(prefers-color-scheme: dark)').matches;
    const explicit = document.documentElement.getAttribute('data-theme');
    const isDark = explicit === 'dark' || (explicit !== 'light' && prefersDark);
    mermaid.initialize({ startOnLoad: false, theme: isDark ? 'dark' : 'default' });

    const owner = 'wifiknight45';
    const repo  = 'cv.io';
    const statusEl = document.getElementById('repoStatus');
    const treeUl = document.getElementById('fileTree');
    const mermaidBox = document.getElementById('mermaidBox');
    const treeWrap = document.getElementById('treeWrap');
    const mermaidWrap = document.getElementById('mermaidWrap');
    const viewTreeBtn = document.getElementById('viewTreeBtn');
    const viewMermaidBtn = document.getElementById('viewMermaidBtn');

    viewTreeBtn.addEventListener('click', () => {
      treeWrap.classList.remove('hidden');
      treeWrap.setAttribute('aria-hidden', 'false');
      mermaidWrap.classList.add('hidden');
      mermaidWrap.setAttribute('aria-hidden', 'true');
      viewTreeBtn.setAttribute('aria-pressed', 'true');
      viewMermaidBtn.setAttribute('aria-pressed', 'false');
    });
    viewMermaidBtn.addEventListener('click', async () => {
      treeWrap.classList.add('hidden');
      treeWrap.setAttribute('aria-hidden', 'true');
      mermaidWrap.classList.remove('hidden');
      mermaidWrap.setAttribute('aria-hidden', 'false');
      viewTreeBtn.setAttribute('aria-pressed', 'false');
      viewMermaidBtn.setAttribute('aria-pressed', 'true');
      // Re-render diagram in case theme or size changed
      try { await mermaid.run({ nodes: [mermaidBox] }); } catch {}
    });

    async function fetchJSON(url) {
      const r = await fetch(url, { headers: { 'Accept': 'application/vnd.github+json' } });
      if (!r.ok) throw new Error(`HTTP ${r.status}`);
      return r.json();
    }

    function buildTree(paths) {
      const root = { name: repo, type: 'tree', children: new Map(), path: '' };
      for (const item of paths) {
        const parts = item.path.split('/');
        let cursor = root;
        for (let i = 0; i < parts.length; i++) {
          const part = parts[i];
          const isLast = i === parts.length - 1;
          if (isLast) {
            if (item.type === 'tree') {
              if (!cursor.children.has(part)) {
                cursor.children.set(part, { name: part, type: 'tree', children: new Map(), path: parts.slice(0, i+1).join('/') });
              }
            } else {
              cursor.children.set(part, { name: part, type: 'blob', path: parts.join('/') });
            }
          } else {
            if (!cursor.children.has(part)) {
              cursor.children.set(part, { name: part, type: 'tree', children: new Map(), path: parts.slice(0, i+1).join('/') });
            }
            cursor = cursor.children.get(part);
          }
        }
      }
      return root;
    }

    function renderTree(node, branch, baseUrl) {
      // Depth-first render to <ul>/<li>, collapsible directories with twisty
      const ul = document.createElement('ul');
      ul.className = 'file-tree';

      const entries = [...(node.children || new Map()).entries()]
        .sort((a, b) => {
          // Directories first, then files; alpha within type
          const aDir = a[1].type === 'tree', bDir = b[1].type === 'tree';
          if (aDir !== bDir) return aDir ? -1 : 1;
          return a[0].localeCompare(b[0]);
        });

      for (const [, child] of entries) {
        const li = document.createElement('li');
        li.className = child.type === 'tree' ? 'node-dir' : 'node-file';

        if (child.type === 'tree') {
          const twisty = document.createElement('span');
          twisty.className = 'twisty';
          twisty.textContent = '▸';
          twisty.setAttribute('aria-hidden', 'true');

          const dirLink = document.createElement('a');
          dirLink.className = 'label';
          dirLink.href = child.path ? `${baseUrl}/tree/${branch}/${encodeURI(child.path)}` : `${baseUrl}/tree/${branch}`;
          dirLink.target = '_blank';
          dirLink.rel = 'noopener';
          dirLink.textContent = `📁 ${child.name}/`;

          const childContainer = document.createElement('ul');
          childContainer.className = 'file-tree hidden';

          // Recursively render children
          const sub = renderTree(child, branch, baseUrl);
          if (sub) childContainer.replaceWith(sub); // We'll attach below after we control classes

          // We need to actually build and attach the real sublist
          const subList = renderTree(child, branch, baseUrl);
          const subUl = subList || document.createElement('ul');
          subUl.classList.add('file-tree', 'hidden');

          twisty.addEventListener('click', () => {
            const isHidden = subUl.classList.contains('hidden');
            subUl.classList.toggle('hidden');
            twisty.textContent = isHidden ? '▾' : '▸';
          });
          dirLink.addEventListener('click', (e) => {
            // Expand/collapse on label click without blocking link if meta/ctrl is used
            if (!e.metaKey && !e.ctrlKey) {
              e.preventDefault();
              const isHidden = subUl.classList.contains('hidden');
              subUl.classList.toggle('hidden');
              twisty.textContent = isHidden ? '▾' : '▸';
            }
          });

          li.appendChild(twisty);
          li.appendChild(dirLink);
          li.appendChild(subUl);
        } else {
          const fileLink = document.createElement('a');
          fileLink.className = 'label';
          fileLink.href = `${baseUrl}/blob/${branch}/${encodeURI(child.path)}`;
          fileLink.target = '_blank';
          fileLink.rel = 'noopener';
          fileLink.textContent = `📄 ${child.name}`;
          li.appendChild(fileLink);
        }

        ul.appendChild(li);
      }

      return ul.children.length ? ul : null;
    }

    function buildMermaid(node) {
      // Build a Mermaid "graph TD" that represents directories and files
      const lines = ['graph TD'];
      const classDefs = [
        'classDef dir fill:#eae6ff,stroke:#6a5acd,color:#111,stroke-width:1px;',
        'classDef file fill:#d6f5f2,stroke:#008080,color:#111,stroke-width:1px;'
      ];
      lines.push(...classDefs);

      const idFor = (path) => (path || repo).replace(/[^a-zA-Z0-9_]/g, '_') || 'root';
      function walk(n) {
        const nid = idFor(n.path);
        const label = n.path ? n.name + (n.type === 'tree' ? '/' : '') : repo + '/';
        const cls = n.type === 'tree' ? 'dir' : 'file';
        lines.push(`${nid}["${label}"]:::${cls}`);
        if (n.type === 'tree') {
          const kids = [...n.children.values()]
            .sort((a, b) => (a.type === 'tree' ? -1 : 1) - (b.type === 'tree' ? -1 : 1) || a.name.localeCompare(b.name));
          for (const c of kids) {
            const cid = idFor(c.path);
            lines.push(`${nid}-->${cid}`);
            walk(c);
          }
        }
      }
      walk(node);
      return lines.join('\n');
    }

    async function load() {
      try {
        statusEl.textContent = 'Fetching repository info…';
        const repoInfo = await fetchJSON(`https://api.github.com/repos/${owner}/${repo}`);
        const branch = repoInfo.default_branch || 'main';
        statusEl.textContent = `Loading ${owner}/${repo}@${branch} …`;

        const treeData = await fetchJSON(`https://api.github.com/repos/${owner}/${repo}/git/trees/${encodeURIComponent(branch)}?recursive=1`);

        if (!treeData.tree || !Array.isArray(treeData.tree)) {
          throw new Error('Unexpected API response');
        }

        // Exclude .git-related and optionally node_modules-sized trees for brevity
        const items = treeData.tree.filter(i =>
          !i.path.startsWith('.git/') &&
          i.path !== '.gitignore'
        );

        const root = buildTree(items);

        // Render HTML tree
        treeUl.innerHTML = '';
        const built = renderTree(root, branch, `https://github.com/${owner}/${repo}`);
        if (built) {
          // Replace the placeholder UL with built content
          treeUl.replaceWith(built);
          built.id = 'fileTree';
        } else {
          treeUl.textContent = 'No files found.';
        }

        // Build Mermaid diagram
        const mermaidText = buildMermaid(root);
        mermaidBox.textContent = mermaidText;
        await mermaid.run({ nodes: [mermaidBox] });

        statusEl.textContent = 'Up to date. Refresh the page to fetch the latest.';
      } catch (err) {
        console.error(err);
        statusEl.textContent = 'Could not load repository structure. You can open the repo on GitHub instead.';
        // Provide direct link
        const link = document.createElement('a');
        link.href = `https://github.com/${owner}/${repo}`;
        link.target = '_blank';
        link.rel = 'noopener';
        link.textContent = ` github.com/${owner}/${repo}`;
        statusEl.appendChild(link);
      }
    }

    load();
  </script>
</body>
</html>
